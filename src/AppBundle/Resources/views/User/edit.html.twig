{% extends '::base.html.twig' %}
{% block stylesheets %}
    <link href="{{ asset('css/user/userEdit.css') }}" rel="stylesheet" type="text/css">
{% endblock %}
{% block body -%}
    <h1> Editar usuario</h1>
    <div class="grid">
		<form method="PUT" action="{{ path('user_update', {'id': user.userId}) }}" id="register">
			<div class="user panel panel-default">
				<div class="panel-heading"><h4> Usuario </h4></div>
				<div class="panel-body" >
					<div class="col-lg-3">
						<input type="hidden" value="imagen.jpg" name="image" />
						<img src="{{ asset('uploads/profilePhotos/' ~ user.image) }}" class="imageProfile" />
					</div>
					<div class="col-lg-3">
			        	<label>Nombre</label>
						<input type="text" value="{{user.name}}" name="name" class="form-control" />
					</div>
					<div class="col-lg-3">
			        	<label>Apellido Paterno</label>
						<input type="text" value="{{user.lastName}}" name="lastname" class="form-control" />
					</div>
					<div class="col-lg-3">
			        	<label>Apellido Materno</label>
				        <input type="text" value="{{user.surName}}" name="surname" class="form-control" />
					</div>
					<div class="col-lg-9">
				        <label>Correo</label>
				        <input type="text" value="{{user.username}}" name="email" class="form-control" />
					</div>
					<div class="col-lg-9">
			            <label>Contrase√±a</label>
			            <input type="password" value="{{user.password}}" name="password" class="form-control" />
					</div>
					<div class="col-lg-9">
		          		<label>Fecha de ingreso</label>
			            <div class="" id="datepicker" >
			                <!-- <input type="text" name="admissionDate" placeholder="Fecha de ingreso" id="datepicker" value="{{ user.admissionDate|date("Y-m-d") }}"> 
			                <button class="button"><span class="mif-calendar"></span></button>-->
			                <input type="text" class="form-control" placeholder="YYY-MM-DD" value="{{ user.admissionDate|date("Y-m-d") }}">
			            </div>
		            </div>
		        </div>
	        </div>
	        <div class="col-lg-6">
				<div class=" skills panel panel-default">
					<div class="panel-heading"><h4> Habilidades </h4></div>
					<div class="panel-body" >
						<div class="col-lg-12">
							<div class="form-group input-group">
	                            <input type="text" class="inputSkill form-control" placeholder="Ingresa una skill a la vez">
	                            <span class="input-group-btn">
		                            <button class="addSkill btn btn-default" type="button">
		                            	<i class="fa fa-check"></i>
		                            </button>
	                            </span>
	                        </div>
					    </div>		
						{% set count = 0 %}
						<table class="skillsTable table table-striped">
							<thead>
								<tr>
									<th>Habilidad</th>
									<th>Eliminar</th>
								</tr>
							</thead>
							<tbody>
								{% for userSkill in userSkills %}
									<tr class="skills">
										<td>	
											<input type="hidden" value="{{userSkill.skill.name}}" name="skills[{{ count }}][name]" class="skillName" />
											{{userSkill.skill.name}}
											{{ count }}
											{# loop.index #}
										</td>
										<td>
											<input type="hidden" value="{{userSkill.skill.skillId}}" name="skills[{{ count }}][id]" class="skillId" />
										 	<button class="remove btn btn-danger"> X </button>
										</td>
									</tr>
									{% set count = count + 1 %}
								{% endfor %}
							</tbody>	
						</table>
					</div>
				</div>
			</div>	
			<div class="col-lg-6">
				<div class="accounts panel panel-default">
					<div class="panel-heading"><h4> Cuentas </h4></div>
					<div class="panel-body" >
						CUERPO
					</div>
				</div>
			</div>
			<div class="col-lg-12">
				<div class="col-lg-2">
					<span>
						<a href="{{ path('user') }}">
							<i class="fa fa-arrow-left"></i> Regresar
						</a>	
					</span>
				</div>
				<div class="col-lg-2 col-lg-offset-8">
					<input type="submit" class="btn btn-success" value="Guardar">
				</div>
			</div>
		</form>
	</div>
	{# form(delete_form) #}
	<script>
		var count = {{ count }};
	</script>
{% endblock %}
{% block javascripts %}
	<script type="text/javascript" src="{{ asset('js/user/editSkills.js') }}"></script>
{% endblock %}