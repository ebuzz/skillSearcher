{% extends '::base.html.twig' %}
{% block stylesheets %}
    <link href="{{ asset('css/user/userEdit.css') }}" rel="stylesheet" type="text/css">
    <link href="{{ asset('css/datepicker.css') }}" rel="stylesheet">
{% endblock %}
{% block body -%}
    <h1> Editar usuario</h1>
    <div class="grid">
		<form method="PUT" action="{{ path('user_update', {'id': user.userId}) }}" id="register">
			<div class="user panel panel-default">
				<div class="panel-heading"><h4> Usuario </h4></div>
				<div class="panel-body" >
					<div class="col-lg-3">
						<div class="col-lg-12">
						    <img src="{{ asset('user.jpg') }}" id="output" class="register">
						</div>
						<div class="col-lg-2 col-lg-push-2">
						    <span class="file-input btn btn-outline btn-default btn-sm btn-file">Agregar foto de perfil
						        <input name="image" type="file" />
						    </span>
						</div>
					</div>
					<div class="col-lg-3">
			        	<label>Nombre</label>
						<input type="text" value="{{user.name}}" name="name" class="form-control" />
					</div>
					<div class="col-lg-3">
			        	<label>Apellido Paterno</label>
						<input type="text" value="{{user.lastName}}" name="lastname" class="form-control" />
					</div>
					<div class="col-lg-3">
			        	<label>Apellido Materno</label>
				        <input type="text" value="{{user.surName}}" name="surname" class="form-control" />
					</div>
					<div class="col-lg-9">
				        <label>Correo</label>
				        <input type="text" value="{{user.username}}" name="email" class="form-control" />
					</div>
					<div class="col-lg-9">
			            <label>Contraseña</label>
			            <input type="password" value="{{user.password}}" name="password" class="form-control" />
					</div>
					<div class="col-lg-9">
					    <label for="admissionDate">Fecha de admisión</label>
					    <div class="input-group ">
					        <input type="text" class="form-control date" name="admissionDate"
					                                                   placeholder="(YYYY-MM-DD)" required>
					        <span class="input-group-btn" >
					            <button class="btn btn-default date" type="button">
					            <i class="fa fa-calendar-o"></i></button>
					        </span>
					    </div>
		            </div>
		        </div>
	        </div>
	        <div class="col-lg-6">
				<div class=" allSkills panel panel-default">
					<div class="panel-heading"><h4> Habilidades </h4></div>
					<div class="panel-body" >
						<div class="col-lg-12">
							<div class="form-group input-group">
	                            <input type="text" class="inputSkill form-control" placeholder="Ingresa una skill a la vez">
	                            <span class="input-group-btn">
		                            <button class="addSkill btn btn-default" type="button">
		                            	<i class="fa fa-check"></i>
		                            </button>
	                            </span>
	                        </div>
					    </div>		
						{% set count = 0 %}
						<table class="skillsTable table table-striped">
							<thead>
								<tr>
									<th>Habilidad</th>
									<th>Eliminar</th>
								</tr>
							</thead>
							<tbody>
								{% for userSkill in userSkills %}
									<tr class="skills">
										<td>	
											<input type="hidden" value="{{userSkill.skill.name}}" name="skills[{{ count }}][name]" class="skillName" />
											{{userSkill.skill.name}}
											{# loop.index #}
										</td>
										<td>
											<input type="hidden" value="{{userSkill.skill.skillId}}" name="skills[{{ count }}][id]" class="skillId" />
										 	<button class="remove btn btn-danger"> X </button>
										</td>
									</tr>
									{% set count = count + 1 %}
								{% endfor %}
							</tbody>	
						</table>
					</div>
				</div>
			</div>	
			<div class="col-lg-6">
				<div class="accounts panel panel-default">
					<div class="panel-heading"><h4> Cuentas </h4></div>
					<div class="panel-body" >
						<div class="col-lg-12">
                            {% set countAccount = 0 %}
                            <ul class="accountsUl">
								{% for userAccount in accountList %}
									{% for account in accountsEntity %}
										{% if account.accountid == userAccount %}
											<li>
												<div class="checkbox">
													<input type="checkbox" value="{{ account.accountid }}" checked="checked"  name="account[{{ countAccount }}]"/>
													{{ account.name }}
												</div>
											</li>
										{% endif %}	
									{% endfor %}
									{% set countAccount = countAccount + 1 %}		
								{% endfor %}
								{% for resultado in resultados %}
									{% for account in accountsEntity %}
										{% if account.accountid == resultado %}
											<li>
												<div class="checkbox">
													<input type="checkbox" value="{{ account.accountid }}"  name="account[{{ countAccount }}]"/>
													{{ account.name }}
												</div>
											</li>
													{% endif %}
									{% endfor %}
									{% set countAccount = countAccount + 1 %}
								{% endfor %}	
                            </ul>
                        </div>
					</div>
				</div>
			</div>
			<div class="col-lg-12">
				<div class="col-lg-2">
					<span>
						<a href="{{ path('user') }}">
							<i class="fa fa-arrow-left"></i> Regresar
						</a>	
					</span>
				</div>
				<div class="col-lg-2 col-lg-offset-8">
					<input type="submit" class="btn btn-success" value="Guardar">
				</div>
			</div>
		</form>
	</div>
	<script>
		var count = {{ count }};
	</script>
{% endblock %}
{% block javascripts %}
	<script type="text/javascript" src="{{ asset('js/user/editSkills.js') }}"></script>
	<script type="text/javascript" src="{{ asset('js/jquery-ui.js') }}"></script>
    <script type="text/javascript" src="{{ asset('js/datepicker.js') }}"></script>
{% endblock %}